<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <template id="assets_editor" inherit_id="website.assets_editor" name="Twitter wall Editor">
            <xpath expr="." position="inside">
                <script type="text/javascript" src="/website_twitter_wall/static/src/js/website_twitter_wall_editor.js" />
            </xpath>
        </template>

        <template id="twitter_wall_footer_custom" inherit_id="website.footer_default" name="Footer Twitter Wall Link">
            <xpath expr="//div[@id='info']/ul" position="inside">
                <li><a href="/twitter_walls">Twitter Wall</a></li>
            </xpath>
        </template>

        <template id="assets_frontend" inherit_id="website.assets_frontend" name="Slide">
            <xpath expr="." position="inside">
                <script type="text/javascript" src="/website_twitter_wall/static/src/js/website_twitter_wall.js" />
                <link type="text/less" href="/website_twitter_wall/static/src/less/website_twitter_wall.less" rel="stylesheet" t-ignore="true" />
                <link type="text/stylesheet" rel="stylesheet" href="/website_twitter_wall/static/src/css/website_twitter_wall.css" />
            </xpath>
        </template>

        <template id="website_twitter_wall.twitter_thumb_wall" name="Twitter Wall">
            <div class="col-sm-6 col-md-4">
                <div t-attf-class="wall-dislay-box mt16 mb16">
                    <span class="wall-image-box">
                        <a t-attf-href="/twitter_wall/story/#{wall.id}" title="Storify" data-toggle="tooltip">
                            <img t-attf-src="/website/image/website.twitter.wall/#{wall.id}/image/250x250" class="img-responsive full_width" />
                        </a>
                    </span>
                    <div class="full_padding">
                        <div class="mb8 mt0">
                            <div class="wall-title-text-truncation pull-left">
                                <h3 t-esc="wall.name" class="mt0 text_ellipsis" />
                            </div>
                        </div>
                        <div class="wall-title-text-truncation full_width">
                            <p t-field="wall.description" class="mb16 text_ellipsis" />
                        </div>
                        <div class="mb8">
                            <div t-if="not wall.twitter_access_token and not is_public_user" class="pull-left">
                                <a t-attf-href="/twitter_wall/authenticate/#{wall.id}"><i class="fa fa-arrow-right" /> Verify with Twitter Account</a>
                            </div>
                            <div class="pull-right">
                                <t t-call="website.publish_management">
                                    <t t-set="object" t-value="wall" />
                                    <t t-set="publish_edit" t-value="True" />
                                    <li><a t-attf-href="/twitter_wall/#{wall.id}/delete">Delete</a></li>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </template>
        
        <template id="website_twitter_wall.twitter_walls" name="Twitter Walls">
            <t t-call="website.layout">
                <div class="oe_structure" />
                <div class="container">
                    <div class="row">
                        <div class="text-center text-muted" t-if="not walls">
                            <h1>No twitter wall found</h1>
                            <h3>Goto Content menu -> New Twitter Wall</h3>
                        </div>
                        <t t-foreach="walls" t-as="wall">
                            <t t-call="website_twitter_wall.twitter_thumb_wall" />
                        </t>
                    </div>
                </div>
            </t>
        </template>

        <template id="website_twitter_wall.twitter_wall_story" name="Storify">
            <t t-set="head">
                <script src="//platform.twitter.com/widgets.js" charset="utf-8" />
            </t>
            <t t-call="website.layout">
                <div class="oe_structure" />
                <div t-attf-style="background-image: url(/website/image/website.twitter.wall/#{wall.id}/image);background-repeat: no-repeat;background-size: 100% 100%;">
                    <div class="cover">
                        <div class="container">
                            <h1 class="mt32 wall-story-title" t-esc="wall.name" />
                            <p class="mt32 wall-story-subtitle" t-esc="wall.description" />
                        </div>
                    </div>
                </div>
                <nav class="navbar navbar-default">
                    <div class="container">
                        <div class="container-fluid">
                            <ul class="nav navbar-nav">
                                <li>
                                    <p class="navbar-text mb0"><timeago class="timeago" t-att-title="wall.create_date" /></p>
                                </li>
                                <li>
                                    <p class="navbar-text mb0" t-esc="'%s Total views' % wall.number_view" />
                                </li>
                            </ul>
                            <ul class="nav navbar-nav navbar-right">
                                <a class="btn btn-default mt8" t-attf-href="/twitter_wall/#{wall.id}" title="Full screen and Go into live tweet" data-toggle="tooltip"><i class="fa fa-arrows-alt" /></a>
                            </ul>
                        </div>
                    </div>
                </nav>
                <div class="container">
                    <div class="row">
                        <center class="col-sm-12">
                            <t t-foreach="tweets" t-as="tweet">
                                <div t-raw="tweet.html_description" class="mt32" />
                                <div t-field="tweet.comment" />
                            </t>
                            <div class="text-muted" t-if="not tweets">
                                <h1>Hey! No tweet found</h1>
                                <h3>Goto full screen mode to fetch some tweet</h3>
                            </div>
                        </center>
                    </div>
                    <div class="row text-center">
                        <t t-call="website.pager" />
                    </div>
                </div>
            </t>
        </template>

        <!-- Page that display walls -->
        <template id="twitter_wall" name="Twitter Wall Tweet">
            <t t-call="website.layout">
                <t t-set="head">
                    <script src="//platform.twitter.com/widgets.js" charset="utf-8" />
                </t>
                <div class="full_screen" name="tweets_for_client" t-attf-style="background-image: url('data:image/jpg;base64, #{back_image}')">
                    <div class="container" t-att-wall_id="wall_id">
                        <div class="row">
                            <center>
                                <div class="col-sm-12" id="tweet_wall_div" />
                            </center>
                        </div>
                    </div>
                    <nav class="navbar navbar-default navbar-fixed-bottom">
                        <div class="container">
                            <div class="row mt8 text-center">
                                <div class="col-sm-4 col-md-4 col-xs-12">
                                    Tweet us: <label class="label label-danger"># opendays</label>
                                </div>
                                <div class="col-sm-4 col-md-4 col-xs-12">
                                    <a class="btn btn-primary"><i class="fa fa-expand" /></a>
                                </div>
                                <div class="col-sm-4 col-md-4 col-xs-12">
                                    Twitter wall powered by Odoo.
                                </div>
                            </div>
                        </div>
                    </nav>
                </div>
            </t>
        </template>

        <template id="content_new_twitter_wall" inherit_id="website.user_navbar">
            <xpath expr="//ul[@id='oe_systray']/li/ul[@class='dropdown-menu oe_content_menu']" position="inside">
                 <li><a href="#" data-action="new_twitter_wall">New Twitter Wall</a></li>
            </xpath>
        </template>

    </data>
</openerp>
