<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <!-- Add js file for create new tweet -->
        <template id="assets_editor" inherit_id="website.assets_editor" name="Twitter wall Editor">
            <xpath expr="." position="inside">
                <script type="text/javascript" src="/website_twitter_wall/static/src/js/website_twitter_wall_creator.js" />
            </xpath>
        </template>

        <!-- Add link of twitter wall in Connect with us -->
        <template id="twitter_wall_footer_custom" inherit_id="website.footer_default" name="Footer Twitter Wall Link">
            <xpath expr="//div[@id='info']/ul" position="inside">
                <li><a href="/twitter_walls">Twitter Wall</a></li>
            </xpath>
        </template>

        <!-- Add menuitem new twitter wall in content menu -->
        <template id="content_new_twitter_wall" inherit_id="website.user_navbar">
            <xpath expr="//ul[@id='oe_systray']/li/ul[@class='dropdown-menu oe_content_menu']" position="inside">
                 <li><a href="#" data-action="new_twitter_wall">New Twitter Wall</a></li>
            </xpath>
        </template>

        <!-- Assets for twitter wall -->
        <template id="assets_frontend" inherit_id="website.assets_frontend" name="Slide">
            <xpath expr="." position="inside">
                <script type="text/javascript" src="/website_twitter_wall/static/src/js/website_twitter_wall.js" />
                <link type="text/less" href="/website_twitter_wall/static/src/less/website_twitter_wall.less" rel="stylesheet" t-ignore="true" />
            </xpath>
        </template>

        <!-- Display walls -->
        <template id="website_twitter_wall.twitter_walls" name="Twitter Walls">
            <t t-call="website.layout">
                <div class="oe_structure" />
                <div class="container">
                    <div class="row">
                        <!-- When no wall is there diplay hint -->
                        <div class="text-center text-muted" t-if="not walls">
                            <h1>Hey! No twitter wall found</h1>
                            <h3>Goto Content menu -> New Twitter Wall</h3>
                        </div>
                        <div t-foreach="walls" t-as="wall" class="col-sm-6 col-md-4">
                            <div class="odoo-wall-dislay-box mt16 mb16">
                                <a t-attf-href="/twitter_wall/story/#{wall.id}" title="Storify" data-toggle="tooltip" class="odoo-wall-image-box">
                                    <img t-attf-src="/website/image/stream.agent/#{wall.id}/image/400x400" class="img-responsive odoo-wall-width" />
                                </a>
                                <div class="odoo-wall-padding">
                                    <h3 t-esc="wall.name" class="mt0 odoo-wall-text" />
                                    <p t-esc="wall.description" class="odoo-wall-text text-muted" />
                                    <a t-if="not wall.twitter_access_token and not is_public_user" class="pull-left" t-attf-href="/twitter_wall/authenticate/#{wall.id}">
                                        <i class="fa fa-arrow-right" /> Verify with Twitter Account
                                    </a>
                                    <t class="pull-right" t-call="website.publish_management">
                                        <t t-set="object" t-value="wall" />
                                        <t t-set="publish_edit" t-value="True" />
                                        <li><a t-attf-href="/twitter_wall/delete/#{wall.id}">Delete</a></li>
                                    </t>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </template>

        <!-- Storify view -->
        <template id="website_twitter_wall.twitter_wall_story" name="Storify">
            <t t-set="head">
                <meta name="twitter:widgets:link-color" content="#A24689" />
                <script src="//platform.twitter.com/widgets.js" charset="utf-8" />
            </t>
            <t t-call="website.layout">
                <div class="oe_structure" />
                <div t-attf-style="background-image: url(/website/image/stream.agent/#{wall.id}/image);background-size: cover;">
                    <div class="odoo-wall-story-cover">
                        <div class="container">
                            <h1 class="mt32 odoo-wall-story-title" t-esc="wall.name" />
                            <p class="mt32 odoo-wall-story-subtitle" t-esc="wall.description" />
                        </div>
                    </div>
                </div>
                <nav class="navbar navbar-default">
                    <div class="container">
                        <div class="container-fluid">
                            <ul class="nav navbar-nav">
                                <li class="navbar-text mb0"><timeago class="timeago" t-att-title="wall.create_date" /></li>
                                <li class="navbar-text mb0" t-esc="'%s Total views' % wall.number_view" />
                            </ul>
                            <ul class="nav navbar-nav navbar-right">
                                <a class="btn btn-default mt8" t-attf-href="/twitter_wall/#{wall.id}" title="Live tweet" data-toggle="tooltip"><i class="fa fa-arrows-alt" /></a>
                            </ul>
                        </div>
                    </div>
                </nav>
                <div class="container">
                    <div class="row">
                        <center class="col-sm-12">
                            <t t-foreach="tweets" t-as="tweet">
                                <div t-raw="tweet.html_description" class="mt32" />
                                <div t-field="tweet.comment" />
                            </t>
                            <!-- When no tweet is there display hint -->
                            <div class="text-muted" t-if="not tweets">
                                <h1>Hey! No tweet found</h1>
                            </div>
                        </center>
                    </div>
                    <div class="row text-center">
                        <t t-call="website.pager" />
                    </div>
                </div>
            </t>
        </template>

        <!-- Display live tweet page -->
        <template id="twitter_wall" name="Twitter Wall Tweet">
            <t t-set="head">
                <meta name="twitter:widgets:link-color" content="#A24689" />
            </t>
            <t t-call="website.layout">
                <div name="tweets_for_client">
                    <div class="container">
                        <div class="row">
                            <center>
                                <div class="col-sm-12" t-att-wall_id="wall_id" id="tweet_wall_div" />
                            </center>
                        </div>
                    </div>
                    <nav class="navbar navbar-default navbar-fixed-bottom">
                        <div class="container">
                            <div class="row mt8 text-center">
                                <div class="col-sm-4 col-md-4 col-xs-12">
                                    Tweet us: <label class="label label-danger"># opendays</label>
                                </div>
                                <div class="col-sm-4 col-md-4 col-xs-12">
                                    <span class="options">
                                        <div class="btn-group" role="group">
                                            <button type="button" class="btn btn-default" data-toggle="tooltip" title="List view"><i class="fa fa-list" /></button>
                                            <button type="button" class="btn btn-default" data-toggle="tooltip" title="Card view"><i class="fa fa-th-large" /></button>
                                            <button type="button" class="btn btn-default" data-toggle="tooltip" title="Single view"><i class="fa fa-square" /></button>
                                        </div>
                                        <div class="btn-group" role="group">
                                            <button type="button" class="btn btn-default" data-toggle="tooltip" title="Shuffle"><i class="fa fa-random" /></button>
                                            <button type="button" class="btn btn-default" data-toggle="tooltip" title="Repeat"><i class="fa fa-repeat" /></button>
                                        </div>
                                        <button type="button" class="btn btn-default" data-toggle="tooltip" title="Ken burns effect"><i class="fa fa-magic" /></button>
                                    </span>
                                </div>
                                <div class="col-sm-4 col-md-4 col-xs-12">
                                    Twitter wall powered by Odoo.
                                </div>
                            </div>
                        </div>
                    </nav>
                </div>
            </t>
        </template>

    </data>
</openerp>
